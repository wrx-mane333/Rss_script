-- RSS | God Mode Menu (Optimized)
-- –ê–≤—Ç–æ—Ä:
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "RSS | God Mode Menu",
   LoadingTitle = "–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è...",
   LoadingSubtitle = "by Claude AI for Delta",
   ConfigurationSaving = { Enabled = false }
})

local Tab = Window:CreateTab("‚öΩ –§—É–Ω–∫—Ü–∏–∏ –ú—è—á–∞", 4483362458)
local TabGoalkeeper = Window:CreateTab("ü•Ö –í—Ä–∞—Ç–∞—Ä—å", 4483362458)

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
local Settings = {
    MagnetEnabled = false,
    Method = "–ü–ª–∞–≤–Ω–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ",
    Range = 25,
    Strength = 50,
    ShowRadius = false,
    AutoSave = false,
    SaveDistance = 20,
    SaveSpeed = 120,
    AutoMove = true
}

-- –í–∏–∑—É–∞–ª—ã
local radiusPart = nil
local goalkeeperZone = nil

-- –ö—ç—à–∏ –∏ —Ç–∞–π–º–µ—Ä—ã
local cachedBall = nil
local lastBallSearch = 0
local ballSearchInterval = 0.3 -- —Å–µ–∫—É–Ω–¥ (—É–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –±–æ–ª–µ–µ —á–∞—Å—Ç–æ–≥–æ –ø–æ–∏—Å–∫–∞)

local cachedGoal = nil
local lastGoalCheck = 0
local goalCheckInterval = 0.5 -- —Å–µ–∫—É–Ω–¥ (—É–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –±–æ–ª–µ–µ —á–∞—Å—Ç–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)

local lastUpdate = 0
local logicInterval = 0.06 -- ~16 –ª–æ–≥–∏–∫/—Å–µ–∫

local lastRadiusUpdate = 0
local radiusUpdateInterval = 0.12

-- –£—Ç–∏–ª–∏—Ç—ã
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local function safeDestroy(inst)
    if inst and inst.Destroy then
        pcall(function() inst:Destroy() end)
    end
end

-- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–¥–∏—É—Å–∞
local function createRadiusVisual()
    safeDestroy(radiusPart)

    radiusPart = Instance.new("Part")
    radiusPart.Name = "MagnetRadius"
    radiusPart.Anchored = true
    radiusPart.CanCollide = false
    radiusPart.Shape = Enum.PartType.Ball
    radiusPart.Material = Enum.Material.ForceField
    radiusPart.Color = Color3.fromRGB(0, 255, 255)
    radiusPart.Transparency = 0.7
    radiusPart.Size = Vector3.new(Settings.Range * 2, Settings.Range * 2, Settings.Range * 2)
    radiusPart.Parent = workspace

    local highlight = Instance.new("SelectionBox")
    highlight.Name = "MagnetRadiusBox"
    highlight.LineThickness = 0.05
    highlight.Color3 = Color3.fromRGB(0, 255, 255)
    highlight.SurfaceTransparency = 0.9
    highlight.Adornee = radiusPart
    highlight.Parent = radiusPart

    return radiusPart
end

local function updateRadiusVisual()
    if not Settings.ShowRadius or not radiusPart then return end
    if tick() - lastRadiusUpdate < radiusUpdateInterval then return end
    lastRadiusUpdate = tick()

    local pl = Players.LocalPlayer
    local char = pl and pl.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        local hrp = char.HumanoidRootPart
        radiusPart.Position = hrp.Position
        radiusPart.Size = Vector3.new(Settings.Range * 2, Settings.Range * 2, Settings.Range * 2)
    else
        -- –µ—Å–ª–∏ –Ω–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ ‚Äî —Å–ø—Ä—è—Ç–∞—Ç—å
        radiusPart.Transparency = 1
    end
end

-- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–æ–Ω—ã –≤—Ä–∞—Ç–∞—Ä—è
local function createGoalkeeperZone()
    safeDestroy(goalkeeperZone)

    goalkeeperZone = Instance.new("Part")
    goalkeeperZone.Name = "GoalkeeperZone"
    goalkeeperZone.Anchored = true
    goalkeeperZone.CanCollide = false
    goalkeeperZone.Shape = Enum.PartType.Ball
    goalkeeperZone.Material = Enum.Material.Neon
    goalkeeperZone.Color = Color3.fromRGB(255, 50, 50)
    goalkeeperZone.Transparency = 0.75
    goalkeeperZone.Size = Vector3.new(Settings.SaveDistance * 2, Settings.SaveDistance * 2, Settings.SaveDistance * 2)
    goalkeeperZone.Parent = workspace

    local highlight = Instance.new("SelectionBox")
    highlight.Name = "GoalkeeperZoneBox"
    highlight.LineThickness = 0.08
    highlight.Color3 = Color3.fromRGB(255, 0, 0)
    highlight.Adornee = goalkeeperZone
    highlight.Parent = goalkeeperZone
end

local function updateGoalkeeperZonePosition(goalkeeperPosition)
    if not goalkeeperZone or not goalkeeperPosition then return end
    goalkeeperZone.Position = goalkeeperPosition
    goalkeeperZone.Size = Vector3.new(Settings.SaveDistance * 2, Settings.SaveDistance * 2, Settings.SaveDistance * 2)
end

-- =========================
-- –ü–û–ò–°–ö –ú–Ø–ß–ê (–ö–ï–®–ò–†–û–í–ê–ù–ù–´–ô)
-- =========================
local function isBallValid(v)
    if not v or not v:IsA("BasePart") then return false end
    if v.Name ~= "SoccerBall" then return false end
    -- –∏—Å–∫–ª—é—á–∞–µ–º –æ—á–µ–≤–∏–¥–Ω—ã–π –ª–æ–±–±–∏-–ø—É—Ç—å
    local full = v:GetFullName()
    if full:find("Lobby") or full:find("SoccerBalls") then
        return false
    end
    return true
end

local function getBallCached(forceSearch)
    -- –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à (–µ—Å–ª–∏ –Ω–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–∏—Å–∫)
    if not forceSearch and cachedBall and cachedBall.Parent and cachedBall:IsA("BasePart") then
        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—è—á –≤—Å–µ –µ—â–µ –≤–∞–ª–∏–¥–µ–Ω
        local full = cachedBall:GetFullName()
        if not full:find("Lobby") and not full:find("SoccerBalls") then
            return cachedBall
        else
            -- –ö–µ—à —É—Å—Ç–∞—Ä–µ–ª, –æ—á–∏—â–∞–µ–º
            cachedBall = nil
        end
    end

    -- throttle –ø–æ–∏—Å–∫–∞ (–µ—Å–ª–∏ –Ω–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π)
    if not forceSearch and tick() - lastBallSearch < ballSearchInterval then
        return cachedBall -- –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–µ—à –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω —É—Å—Ç–∞—Ä–µ–ª
    end
    lastBallSearch = tick()

    local found = nil
    local player = Players.LocalPlayer
    local char = player and player.Character
    local playerPos = char and char:FindFirstChild("HumanoidRootPart") and char.HumanoidRootPart.Position
    
    -- –°–Ω–∞—á–∞–ª–∞ –∏—â–µ–º –±–ª–∏–∂–∞–π—à–∏–π –º—è—á –∫ –∏–≥—Ä–æ–∫—É (–µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–∑–∏—Ü–∏—è)
    if playerPos then
        local closestBall = nil
        local closestDist = math.huge
        
        for _, v in ipairs(workspace:GetDescendants()) do
            if v:IsA("BasePart") and v.Name == "SoccerBall" then
                local full = v:GetFullName()
                -- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –º—è—á–∏ –∏–∑ –ª–æ–±–±–∏
                if not full:find("Lobby") and not full:find("SoccerBalls") then
                    local dist = (v.Position - playerPos).Magnitude
                    if dist < closestDist then
                        closestDist = dist
                        closestBall = v
                    end
                end
            end
        end
        
        if closestBall then
            found = closestBall
        end
    end
    
    -- –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –ø–æ –±–ª–∏–∑–æ—Å—Ç–∏, –∏—â–µ–º –ª—é–±–æ–π –≤–∞–ª–∏–¥–Ω—ã–π –º—è—á
    if not found then
        for _, v in ipairs(workspace:GetDescendants()) do
            if v:IsA("BasePart") and v.Name == "SoccerBall" then
                local full = v:GetFullName()
                -- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –ª–æ–±–±–∏
                if not full:find("Lobby") then
                    -- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º –¥–≤–∏–∂—É—â–∏–µ—Å—è –º—è—á–∏
                    if v.AssemblyLinearVelocity and v.AssemblyLinearVelocity.Magnitude > 0.1 then
                        found = v
                        break
                    elseif not found then
                        -- –ï—Å–ª–∏ –Ω–µ—Ç –¥–≤–∏–∂—É—â–∏—Ö—Å—è, –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π –Ω–µ-–ª–æ–±–±–∏ –º—è—á
                        found = v
                    end
                end
            end
        end
    end

    cachedBall = found
    return found
end

-- =========================
-- –ü–û–ò–°–ö –í–û–†–û–¢ (–ö–ï–®–ò–†–û–í–ê–ù–ù–´–ô)
-- =========================
local function findMyGoal()
    local player = Players.LocalPlayer
    if not player then return nil end
    local char = player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return nil end
    
    local hrp = char.HumanoidRootPart
    local playerPos = hrp.Position
    
    local away = workspace:FindFirstChild("AwayPosition")
    local home = workspace:FindFirstChild("HomePosition")
    
    local awayGoal = away and away:FindFirstChild("GoalieCenter")
    local homeGoal = home and home:FindFirstChild("GoalieCenter")
    
    -- –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–ª–∏–∂–∞–π—à–∏–µ –≤–æ—Ä–æ—Ç–∞ –∫–∞–∫ –í–ê–®–ò
    if awayGoal and awayGoal:IsA("BasePart") and homeGoal and homeGoal:IsA("BasePart") then
        local distToAway = (awayGoal.Position - playerPos).Magnitude
        local distToHome = (homeGoal.Position - playerPos).Magnitude
        return distToAway < distToHome and awayGoal or homeGoal
    elseif awayGoal and awayGoal:IsA("BasePart") then
        return awayGoal
    elseif homeGoal and homeGoal:IsA("BasePart") then
        return homeGoal
    end
    
    -- –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ —á–µ—Ä–µ–∑ AwayPosition/HomePosition, –∏—â–µ–º –ª—é–±–æ–π GoalieCenter –±–ª–∏–∂–∞–π—à–∏–π –∫ –∏–≥—Ä–æ–∫—É
    local closestGoal = nil
    local closestDist = math.huge
    for _, v in ipairs(workspace:GetDescendants()) do
        if v.Name == "GoalieCenter" and v:IsA("BasePart") then
            local dist = (v.Position - playerPos).Magnitude
            if dist < closestDist then
                closestDist = dist
                closestGoal = v
            end
        end
    end
    
    return closestGoal
end

local function getMyGoalCached()
    local player = Players.LocalPlayer
    if not player then return nil end
    local char = player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return nil end
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
    if cachedGoal and cachedGoal.Parent and cachedGoal:IsA("BasePart") then
        local hrp = char.HumanoidRootPart
        local dist = (cachedGoal.Position - hrp.Position).Magnitude
        -- –ï—Å–ª–∏ –≤–æ—Ä–æ—Ç–∞ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ (–±–æ–ª–µ–µ 200 studs), –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ–º
        if dist < 200 then
            return cachedGoal
        end
    end

    if tick() - lastGoalCheck < goalCheckInterval then
        return cachedGoal
    end
    lastGoalCheck = tick()

    cachedGoal = findMyGoal()
    return cachedGoal
end

-- =========================
-- –ü–†–ï–î–°–ö–ê–ó–ê–ù–ò–ï –¢–†–ê–ï–ö–¢–û–†–ò–ò –ú–Ø–ß–ê
-- =========================
local function predictBallPosition(ball, timeAhead)
    if not ball then return nil end
    local vel = ball.AssemblyLinearVelocity
    if not vel then vel = Vector3.new(0,0,0) end
    -- –µ—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ—á—Ç–∏ –Ω—É–ª–µ–≤–∞—è ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é
    if vel.Magnitude < 0.5 then
        return ball.Position
    end
    -- –ø—Ä–æ—Å—Ç–∞—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å: pos + vel * t
    return ball.Position + (vel * timeAhead)
end

-- =========================
-- –û–ß–ò–°–¢–ö–ê BODYVELOCITY
-- =========================
local function removeBV(ball)
    if ball and ball:FindFirstChild("BV_Magnet") then
        safeDestroy(ball.BV_Magnet)
    end
end

-- =========================
-- –û–°–ù–û–í–ù–û–ô –¶–ò–ö–õ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω)
-- =========================
local connection

local function startMagnet()
    if connection then
        connection:Disconnect()
        connection = nil
    end

    connection = RunService.Heartbeat:Connect(function(dt)
        if tick() - lastUpdate < logicInterval then return end
        lastUpdate = tick()

        -- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª–æ–≤ (—Ä–µ–¥–∫–æ)
        if Settings.ShowRadius then
            updateRadiusVisual()
        end

        local player = Players.LocalPlayer
        if not player then return end
        local char = player.Character
        if not char then return end
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        -- –û–±–Ω–æ–≤–ª—è–µ–º –∑–æ–Ω—É –≤—Ä–∞—Ç–∞—Ä—è –≤–æ–∑–ª–µ –Ω–µ–≥–æ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ-—Å–µ–π–≤)
        if Settings.AutoSave and goalkeeperZone then
            updateGoalkeeperZonePosition(hrp.Position)
        end

        -- –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º—è—á / –≤–æ—Ä–æ—Ç–∞
        -- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—â–µ–º –º—è—á –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç –≤ –∫–µ—à–µ
        local ball = getBallCached()
        if not ball then
            ball = getBallCached(true) -- –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
        end
        local myGoal = getMyGoalCached()

        -- =========================
        -- –ê–í–¢–û-–°–ï–ô–í (–≤—Ä–∞—Ç–∞—Ä—å)
        -- =========================
        if Settings.AutoSave and myGoal then
            -- –ï—Å–ª–∏ –º—è—á –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –µ–≥–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
            if not ball then
                ball = getBallCached(true)
            end
            
            if ball then
            -- –í—ã—á–∏—Å–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫ –≤–æ—Ä–æ—Ç–∞–º
            local toGoal = (myGoal.Position - ball.Position)
            local distToGoalNow = toGoal.Magnitude
            
            -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ª–µ—Ç–∏—Ç –ª–∏ –º—è—á –≤ —Å—Ç–æ—Ä–æ–Ω—É –≤–æ—Ä–æ—Ç
            local ballVel = ball.AssemblyLinearVelocity
            local ballVelMag = (ballVel and ballVel.Magnitude) or 0
            
            -- –ï—Å–ª–∏ –º—è—á –¥–≤–∏–∂–µ—Ç—Å—è –∫ –≤–æ—Ä–æ—Ç–∞–º (—Å–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ)
            local ballToGoalDir = toGoal.Unit
            local ballMovingToGoal = false
            if ballVelMag > 5 then
                local velDir = ballVel.Unit
                local dot = velDir:Dot(ballToGoalDir)
                ballMovingToGoal = dot > 0.3 -- –º—è—á –¥–≤–∏–∂–µ—Ç—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω—É –≤–æ—Ä–æ—Ç
            end
            
            -- –ï—Å–ª–∏ –º—è—á –±–ª–∏–∑–∫–æ –∫ –≤–æ—Ä–æ—Ç–∞–º –ò–õ–ò –¥–≤–∏–∂–µ—Ç—Å—è –∫ –≤–æ—Ä–æ—Ç–∞–º
            if distToGoalNow <= Settings.SaveDistance * 1.5 or (ballMovingToGoal and distToGoalNow <= Settings.SaveDistance * 2.5) then
                -- –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
                local timeAhead = math.clamp(distToGoalNow / math.max(ballVelMag, 10), 0.1, 0.8)
                local predictedPos = predictBallPosition(ball, timeAhead)
                
                if predictedPos then
                    local distPredToGoal = (predictedPos - myGoal.Position).Magnitude
                    local distPredToGoalkeeper = (predictedPos - hrp.Position).Magnitude
                    
                    -- –ï—Å–ª–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –∑–æ–Ω—É –∑–∞—â–∏—Ç—ã
                    if distPredToGoal <= Settings.SaveDistance * 1.2 or distPredToGoalkeeper <= Settings.SaveDistance then
                        -- –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
                        local intercept = predictedPos + Vector3.new(0, 2.5, 0)
                        
                        -- –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ç–æ—á–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
                        local distToIntercept = (intercept - hrp.Position).Magnitude
                        
                        -- –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —Ç–æ—á–∫–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
                        local lerpSpeed = math.clamp(distToIntercept / 10, 0.3, 0.7)
                        local targetCFrame = CFrame.new(intercept, ball.Position)
                        hrp.CFrame = hrp.CFrame:Lerp(targetCFrame, lerpSpeed)
                        
                        -- –ü—Ä–∏ AutoMove - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ –º—è—á—É
                        if Settings.AutoMove then
                            local moveToBall = ball.Position + Vector3.new(0, 2, -1.5)
                            hrp.CFrame = hrp.CFrame:Lerp(CFrame.new(moveToBall, ball.Position), 0.25)
                        end
                        
                        -- –ü—Ä—ã–∂–æ–∫ –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ (—á–∞—â–µ)
                        local hum = char:FindFirstChildOfClass("Humanoid")
                        if hum then
                            if distToIntercept < 5 and math.random(1, 3) == 1 then
                                pcall(function() hum:ChangeState(Enum.HumanoidStateType.Jumping) end)
                            end
                        end
                        
                        -- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–µ–π–≤–µ
                        if math.random(1, 15) == 1 then
                            Rayfield:Notify({
                                Title = "ü•Ö –°–ï–ô–í!",
                                Content = "–í—Ä–∞—Ç–∞—Ä—å –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏–ª –º—è—á",
                                Duration = 1
                            })
                        end
                    end
                end
            else
                -- –ú—è—á –Ω–µ –Ω–∞–π–¥–µ–Ω - –≤—ã–≤–æ–¥–∏–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —Ä–µ–¥–∫–æ
                if math.random(1, 100) == 1 then
                    -- –¢–∏—Ö–∏–π –¥–µ–±–∞–≥ (–º–æ–∂–Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å)
                    -- print("[RSS] –ú—è—á –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è –∞–≤—Ç–æ-—Å–µ–π–≤–∞")
                end
            end
        end

        -- =========================
        -- –ú–ê–ì–ù–ò–¢ –ú–Ø–ß–ê
        -- =========================
        if Settings.MagnetEnabled and ball then
            local distance = (hrp.Position - ball.Position).Magnitude

            if distance <= Settings.Range then
                local ballVel = ball.AssemblyLinearVelocity
                local ballVelMag = (ballVel and ballVel.Magnitude) or 0
                local direction = (hrp.Position - ball.Position)
                
                if direction.Magnitude > 0.01 then
                    direction = direction.Unit
                    
                    if Settings.Method == "–§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞" then
                        -- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞ —Å —É—á–µ—Ç–æ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
                        local strengthMultiplier = 1 - (distance / Settings.Range) -- —Å–∏–ª—å–Ω–µ–µ –±–ª–∏–∂–µ
                        local speed = math.clamp(distance * 2.5 * strengthMultiplier, 25, Settings.Strength)
                        local targetVel = direction * speed
                        ball.AssemblyLinearVelocity = ball.AssemblyLinearVelocity:Lerp(targetVel, 0.4)

                    elseif Settings.Method == "–ñ–µ—Å—Ç–∫–æ–µ –ø—Ä–∏–ª–∏–ø–∞–Ω–∏–µ" then
                        -- –ü—Ä–∏–≤—è–∑–∫–∞ —Ä—è–¥–æ–º —Å –∏–≥—Ä–æ–∫–æ–º
                        local attachCFrame = hrp.CFrame * CFrame.new(0, -2.5, -3)
                        ball.CFrame = attachCFrame
                        ball.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
                        if ball.AssemblyAngularVelocity then
                            ball.AssemblyAngularVelocity = Vector3.new(0, 0, 0)
                        end
                        removeBV(ball)

                    elseif Settings.Method == "–í–µ–∫—Ç–æ—Ä–Ω—ã–π –∑–∞—Ö–≤–∞—Ç" then
                        -- –ò—Å–ø–æ–ª—å–∑—É–µ–º BodyVelocity –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è
                        if not ball:FindFirstChild("BV_Magnet") then
                            local bv = Instance.new("BodyVelocity")
                            bv.Name = "BV_Magnet"
                            bv.MaxForce = Vector3.new(400000, 400000, 400000)
                            bv.Velocity = Vector3.new(0, 0, 0)
                            bv.Parent = ball
                        end
                        local bv = ball:FindFirstChild("BV_Magnet")
                        if bv then
                            -- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
                            local strengthMultiplier = 1 - (distance / Settings.Range)
                            local speed = math.clamp(Settings.Strength * strengthMultiplier, 50, Settings.Strength)
                            bv.Velocity = direction * speed
                        end

                    elseif Settings.Method == "–ü–ª–∞–≤–Ω–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ" then
                        -- –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ø–ª–∞–≤–Ω–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ
                        local strengthMultiplier = 1 - (distance / Settings.Range)
                        local targetVel = direction * Settings.Strength * strengthMultiplier
                        local cur = ball.AssemblyLinearVelocity or Vector3.new(0, 0, 0)
                        -- –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –¥–ª—è –ª—É—á—à–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
                        local lerpSpeed = math.clamp(0.15 + (strengthMultiplier * 0.15), 0.15, 0.3)
                        ball.AssemblyLinearVelocity = cur:Lerp(targetVel, lerpSpeed)
                        removeBV(ball)
                    end
                end
            else
                -- –≤–Ω–µ —Ä–∞–¥–∏—É—Å–∞: —É–¥–∞–ª—è–µ–º BV
                removeBV(ball)
            end
        else
            -- –º–∞–≥–Ω–∏—Ç –≤—ã–∫–ª—é—á–µ–Ω - —á–∏—Å—Ç–∏–º BV —É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º—è—á–∞
            if cachedBall then removeBV(cachedBall) end
        end
    end)
end

-- —Å—Ç–∞—Ä—Ç—É–µ–º –ª–æ–≥–∏–∫—É
startMagnet()

-- =========================
-- UI (Rayfield) - —ç–ª–µ–º–µ–Ω—Ç—ã –∏ –∏—Ö –∫–æ–ª–ª–±—ç–∫–∏
-- =========================
Tab:CreateToggle({
   Name = "üß≤ –í–∫–ª—é—á–∏—Ç—å –ú–∞–≥–Ω–∏—Ç",
   CurrentValue = Settings.MagnetEnabled,
   Callback = function(Value) 
       Settings.MagnetEnabled = Value 
       if Value then
           -- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—â–µ–º –º—è—á –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏
           cachedBall = nil
           getBallCached(true)
           Rayfield:Notify({
               Title = "‚úÖ –ú–∞–≥–Ω–∏—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω", 
               Content = "–†–∞–¥–∏—É—Å: " .. Settings.Range .. "–º", 
               Duration = 3
           })
       else
           if cachedBall then removeBV(cachedBall) end
           Rayfield:Notify({Title = "‚ùå –ú–∞–≥–Ω–∏—Ç –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω", Content = "", Duration = 2})
       end
   end,
})

Tab:CreateToggle({
   Name = "üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞–¥–∏—É—Å –¥–µ–π—Å—Ç–≤–∏—è",
   CurrentValue = Settings.ShowRadius,
   Callback = function(Value) 
       Settings.ShowRadius = Value 
       if Value then
           createRadiusVisual()
       else
           safeDestroy(radiusPart)
           radiusPart = nil
       end
   end,
})

Tab:CreateDropdown({
   Name = "‚öôÔ∏è –ú–µ—Ç–æ–¥ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è",
   Options = {"–§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞", "–ñ–µ—Å—Ç–∫–æ–µ –ø—Ä–∏–ª–∏–ø–∞–Ω–∏–µ", "–í–µ–∫—Ç–æ—Ä–Ω—ã–π –∑–∞—Ö–≤–∞—Ç", "–ü–ª–∞–≤–Ω–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ"},
   CurrentValue = Settings.Method,
   Callback = function(Option) 
       Settings.Method = Option 
       if cachedBall then removeBV(cachedBall) end
   end,
})

Tab:CreateSlider({
   Name = "üìè –î–∏—Å—Ç–∞–Ω—Ü–∏—è –∑–∞—Ö–≤–∞—Ç–∞",
   Range = {10, 100},
   Increment = 5,
   CurrentValue = Settings.Range,
   Callback = function(Value) 
       Settings.Range = Value 
       if radiusPart then
           radiusPart.Size = Vector3.new(Value * 2, Value * 2, Value * 2)
       end
   end,
})

Tab:CreateSlider({
   Name = "üí™ –°–∏–ª–∞ –º–∞–≥–Ω–∏—Ç–∞",
   Range = {10, 150},
   Increment = 5,
   CurrentValue = Settings.Strength,
   Callback = function(Value) Settings.Strength = Value end,
})

Tab:CreateSection("üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏")

Tab:CreateButton({
   Name = "üîç –ù–∞–π—Ç–∏ –º—è—á (–¥–µ–±–∞–≥)",
   Callback = function()
       -- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –º—è—á–∞
       cachedBall = nil -- –æ—á–∏—â–∞–µ–º –∫–µ—à
       local ball = getBallCached(true) -- –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
       if ball then
           local char = Players.LocalPlayer.Character
           if char and char:FindFirstChild("HumanoidRootPart") then
               local dist = (char.HumanoidRootPart.Position - ball.Position).Magnitude
               local vel = ball.AssemblyLinearVelocity
               local velMag = vel and vel.Magnitude or 0
               Rayfield:Notify({
                   Title = "‚úÖ –ò–≥—Ä–æ–≤–æ–π –º—è—á –Ω–∞–π–¥–µ–Ω!", 
                   Content = "–î–∏—Å—Ç–∞–Ω—Ü–∏—è: " .. math.floor(dist) .. "–º | –°–∫–æ—Ä–æ—Å—Ç—å: " .. math.floor(velMag) .. " | " .. ball:GetFullName(), 
                   Duration = 6
               })
           else
               Rayfield:Notify({
                   Title = "‚úÖ –ú—è—á –Ω–∞–π–¥–µ–Ω", 
                   Content = "–ù–æ –ø–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω | " .. ball:GetFullName(), 
                   Duration = 4
               })
           end
       else
           -- –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –≤—Å–µ –º—è—á–∏ –¥–ª—è –¥–µ–±–∞–≥–∞
           local allBalls = {}
           for _, v in ipairs(workspace:GetDescendants()) do
               if v:IsA("BasePart") and v.Name == "SoccerBall" then
                   table.insert(allBalls, v:GetFullName())
               end
           end
           local debugInfo = "–ù–∞–π–¥–µ–Ω–æ –º—è—á–µ–π: " .. #allBalls
           if #allBalls > 0 then
               debugInfo = debugInfo .. "\n–ü–µ—Ä–≤—ã–π: " .. allBalls[1]
           end
           Rayfield:Notify({
               Title = "‚ùå –ò–≥—Ä–æ–≤–æ–π –º—è—á –Ω–µ –Ω–∞–π–¥–µ–Ω", 
               Content = debugInfo, 
               Duration = 6
           })
       end
   end,
})

Tab:CreateButton({
   Name = "üìç –¢–µ–ª–µ–ø–æ—Ä—Ç –∫ –º—è—á—É",
   Callback = function()
       local ball = getBallCached()
       local char = Players.LocalPlayer.Character
       if ball and char and char:FindFirstChild("HumanoidRootPart") then
           char.HumanoidRootPart.CFrame = ball.CFrame * CFrame.new(0, 5, 0)
           Rayfield:Notify({Title = "‚úÖ –¢–µ–ª–µ–ø–æ—Ä—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω", Content = "", Duration = 2})
       else
           Rayfield:Notify({Title = "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å", Content = "–ú—è—á –∏–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω", Duration = 2})
       end
   end,
})

-- –í–∫–ª–∞–¥–∫–∞ –≤—Ä–∞—Ç–∞—Ä—è
TabGoalkeeper:CreateToggle({
   Name = "ü•Ö –ê–≤—Ç–æ-—Å–µ–π–≤ (–í—Ä–∞—Ç–∞—Ä—å)",
   CurrentValue = Settings.AutoSave,
   Callback = function(Value) 
       Settings.AutoSave = Value 
           if Value then
               -- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—â–µ–º –º—è—á –∏ –≤–æ—Ä–æ—Ç–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏
               cachedBall = nil
               cachedGoal = nil
               getBallCached(true)
               getMyGoalCached()
               
               Rayfield:Notify({
                   Title = "ü•Ö –†–µ–∂–∏–º –≤—Ä–∞—Ç–∞—Ä—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω", 
                   Content = "–í—Å—Ç–∞–Ω—å—Ç–µ –≤ –≤–æ—Ä–æ—Ç–∞! –°–∫—Ä–∏–ø—Ç –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–±–∏–≤–∞—Ç—å –º—è—á–∏", 
                   Duration = 4
               })
               -- —Å–æ–∑–¥–∞—ë–º –≤–∏–∑—É–∞–ª—å–Ω—É—é –∑–æ–Ω—É –≤–æ–∑–ª–µ –≤—Ä–∞—Ç–∞—Ä—è
               if not goalkeeperZone then 
                   createGoalkeeperZone()
                   local char = Players.LocalPlayer.Character
                   if char and char:FindFirstChild("HumanoidRootPart") then
                       goalkeeperZone.Position = char.HumanoidRootPart.Position
                   end
               end
       else
           Rayfield:Notify({
               Title = "‚ùå –ê–≤—Ç–æ-—Å–µ–π–≤ –≤—ã–∫–ª—é—á–µ–Ω", 
               Content = "", 
               Duration = 2
           })
           safeDestroy(goalkeeperZone)
           goalkeeperZone = nil
       end
   end,
})

TabGoalkeeper:CreateToggle({
   Name = "üèÉ –ê–≤—Ç–æ–¥–≤–∏–∂–µ–Ω–∏–µ –∫ –º—è—á—É",
   CurrentValue = Settings.AutoMove,
   Callback = function(Value) 
       Settings.AutoMove = Value 
   end,
})

TabGoalkeeper:CreateSlider({
   Name = "üìè –†–∞–¥–∏—É—Å –∑–∞—â–∏—Ç—ã –≤–æ—Ä–æ—Ç",
   Range = {10, 40},
   Increment = 1,
   CurrentValue = Settings.SaveDistance,
   Callback = function(Value)
       Settings.SaveDistance = Value
       if goalkeeperZone then
           goalkeeperZone.Size = Vector3.new(Value * 2, Value * 2, Value * 2)
       end
   end,
})

TabGoalkeeper:CreateSlider({
   Name = "‚ö° –°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–±–∏–≤–∞–Ω–∏—è (–≤–∏–∑—É–∞–ª—å–Ω–∞—è)",
   Range = {60, 250},
   Increment = 5,
   CurrentValue = Settings.SaveSpeed,
   Callback = function(Value) Settings.SaveSpeed = Value end,
})

TabGoalkeeper:CreateToggle({
   Name = "üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å –∑–æ–Ω—É –∑–∞—â–∏—Ç—ã",
   CurrentValue = (goalkeeperZone ~= nil),
   Callback = function(Value) 
       if Value then
           if not goalkeeperZone then createGoalkeeperZone() end
       else
           safeDestroy(goalkeeperZone)
           goalkeeperZone = nil
       end
   end,
})

TabGoalkeeper:CreateSection("‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")

TabGoalkeeper:CreateParagraph({
   Title = "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ-—Å–µ–π–≤?",
   Content = "–í—Å—Ç–∞–Ω—å—Ç–µ –≤ –≤–æ—Ä–æ—Ç–∞ (GoalieCenter). –°–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –º—è—á–∞ –∏ –º—è–≥–∫–æ –≤—ã–≤–æ–¥–∏—Ç –≤—Ä–∞—Ç–∞—Ä—è –Ω–∞ –ø–µ—Ä–µ—Ö–≤–∞—Ç. –°–∫—Ä–∏–ø—Ç –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç —Ñ–∏–∑–∏–∫—É –º—è—á–∞ –Ω–∞–ø—Ä—è–º—É—é ‚Äî —ç—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ —Å–Ω–∏–∂–∞–µ—Ç —à–∞–Ω—Å –æ—Ç–∫–∞—Ç–∞ —Å–µ—Ä–≤–µ—Ä–æ–º."
})

TabGoalkeeper:CreateButton({
   Name = "üéØ –ù–∞–π—Ç–∏ –≤–æ—Ä–æ—Ç–∞ (–¥–µ–±–∞–≥)",
   Callback = function()
       local goal = getMyGoalCached() or findMyGoal()
       if goal then
           local char = Players.LocalPlayer.Character
           if char and char:FindFirstChild("HumanoidRootPart") then
           local dist = (char.HumanoidRootPart.Position - goal.Position).Magnitude
               Rayfield:Notify({
                   Title = "‚úÖ –í–∞—à–∏ –≤–æ—Ä–æ—Ç–∞ –Ω–∞–π–¥–µ–Ω—ã",
                   Content = "–î–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–æ –≤–æ—Ä–æ—Ç: " .. math.floor(dist) .. "–º",
                   Duration = 5
               })
           else
               Rayfield:Notify({
                   Title = "‚ö†Ô∏è –í–æ—Ä–æ—Ç–∞ –Ω–∞–π–¥–µ–Ω—ã",
                   Content = "–ù–æ –ø–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω",
                   Duration = 3
               })
           end
       else
           Rayfield:Notify({
               Title = "‚ö†Ô∏è –í–æ—Ä–æ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",
               Content = "–ó–∞–π–¥–∏—Ç–µ –≤ –º–∞—Ç—á!",
               Duration = 3
           })
       end
   end,
})

TabGoalkeeper:CreateButton({
   Name = "üìç –¢–µ–ª–µ–ø–æ—Ä—Ç –≤ –≤–æ—Ä–æ—Ç–∞",
   Callback = function()
       local goal = getMyGoalCached() or findMyGoal()
       local char = Players.LocalPlayer.Character
       if goal and char and char:FindFirstChild("HumanoidRootPart") then
           char.HumanoidRootPart.CFrame = goal.CFrame * CFrame.new(0, 3, 5)
           Rayfield:Notify({
               Title = "‚úÖ –í—ã –≤ –≤–æ—Ä–æ—Ç–∞—Ö!",
               Content = "",
               Duration = 2
           })
       else
           Rayfield:Notify({
               Title = "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å",
               Content = "–í–æ—Ä–æ—Ç–∞ –∏–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",
               Duration = 2
           })
       end
   end,
})

-- =========================
-- –û–ß–ò–°–¢–ö–ê –ü–†–ò –í–´–•–û–î–ï
-- =========================
local function cleanupAll()
    if connection then
        connection:Disconnect()
        connection = nil
    end

    if radiusPart then
        radiusPart:Destroy()
        radiusPart = nil
    end

    if goalkeeperZone then
        goalkeeperZone:Destroy()
        goalkeeperZone = nil
    end

    if cachedBall and cachedBall:FindFirstChild("BV_Magnet") then
        cachedBall.BV_Magnet:Destroy()
    end
end

pcall(function()
    Rayfield:SetWindowClosedCallback(cleanupAll)
end)

print("[RSS] –°–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.") 

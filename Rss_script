-- RSS | God Mode ‚Äî –ø–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å UI, –º–∞–≥–Ω–∏—Ç–æ–º –∏ –∞–≤—Ç–æ-—Å–µ–π–≤–æ–º (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –≤–ª–æ–∂–µ–Ω–Ω—ã–π –º—è—á)
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "RSS | God Mode Menu",
    LoadingTitle = "–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è...",
    LoadingSubtitle = "by ???",
    ConfigurationSaving = { Enabled = false }
})

local Tab = Window:CreateTab("‚öΩ –§—É–Ω–∫—Ü–∏–∏ –ú—è—á–∞", 4483362458)
local TabGoalkeeper = Window:CreateTab("ü•Ö –í—Ä–∞—Ç–∞—Ä—å", 4483362458)

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
local Settings = {
    MagnetEnabled = false,
    Method = "–ü–ª–∞–≤–Ω–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ",
    Range = 25,
    Strength = 50,
    ShowRadius = false,
    AutoSave = false,
    SaveDistance = 20,
    SaveSpeed = 120,
    AutoMove = true,
    ShowGoalkeeperZone = false
}

-- –í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
local radiusPart = nil
local goalkeeperZone = nil
local lastSaveTime = 0

-- –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª–∞ —Ä–∞–¥–∏—É—Å–∞
local function createRadiusVisual()
    if radiusPart then radiusPart:Destroy() end
    radiusPart = Instance.new("Part")
    radiusPart.Name = "MagnetRadius"
    radiusPart.Anchored = true
    radiusPart.CanCollide = false
    radiusPart.Shape = Enum.PartType.Ball
    radiusPart.Material = Enum.Material.ForceField
    radiusPart.Color = Color3.fromRGB(0, 170, 255)
    radiusPart.Transparency = 0.75
    radiusPart.Size = Vector3.new(Settings.Range * 2, Settings.Range * 2, Settings.Range * 2)
    radiusPart.Parent = workspace

    local highlight = Instance.new("SelectionBox")
    highlight.LineThickness = 0.05
    highlight.Color3 = Color3.fromRGB(0, 170, 255)
    highlight.Adornee = radiusPart
    highlight.Parent = radiusPart
end

local function destroyRadiusVisual()
    if radiusPart then
        radiusPart:Destroy()
        radiusPart = nil
    end
end

local function updateRadiusVisual()
    if Settings.ShowRadius and radiusPart then
        local pl = game.Players.LocalPlayer
        local char = pl and pl.Character
        local hrp = char and char:FindFirstChild("HumanoidRootPart")
        if hrp then
            radiusPart.Position = hrp.Position
            radiusPart.Size = Vector3.new(Settings.Range * 2, Settings.Range * 2, Settings.Range * 2)
        end
    end
end

-- –°–æ–∑–¥–∞–Ω–∏–µ –∑–æ–Ω—ã –≤—Ä–∞—Ç–∞—Ä—è
local function createGoalkeeperZone()
    if goalkeeperZone then goalkeeperZone:Destroy() end
    goalkeeperZone = Instance.new("Part")
    goalkeeperZone.Name = "GoalkeeperZone"
    goalkeeperZone.Anchored = true
    goalkeeperZone.CanCollide = false
    goalkeeperZone.Shape = Enum.PartType.Ball
    goalkeeperZone.Material = Enum.Material.Neon
    goalkeeperZone.Color = Color3.fromRGB(255, 80, 80)
    goalkeeperZone.Transparency = 0.75
    goalkeeperZone.Size = Vector3.new(Settings.SaveDistance * 2, Settings.SaveDistance * 2, Settings.SaveDistance * 2)
    goalkeeperZone.Parent = workspace

    local highlight = Instance.new("SelectionBox")
    highlight.LineThickness = 0.08
    highlight.Color3 = Color3.fromRGB(255, 0, 0)
    highlight.Adornee = goalkeeperZone
    highlight.Parent = goalkeeperZone
end

local function destroyGoalkeeperZone()
    if goalkeeperZone then
        goalkeeperZone:Destroy()
        goalkeeperZone = nil
    end
end

-- –ü–æ–∏—Å–∫ –º—è—á–∞ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—É: HumanoidRootPart -> Ball -> ball)
local function getBall()
    -- 1) –ü–æ–ø—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –º—è—á –≤ workspace –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∏–º–µ–Ω–∞–º
    for _, v in pairs(workspace:GetDescendants()) do
        if v.Name == "SoccerBall" and v:IsA("BasePart") then
            -- –∏—Å–∫–ª—é—á–∞–µ–º –ª–æ–±–±–∏
            local full = v:GetFullName()
            if not full:find("Lobby") then
                return v
            end
        end
    end

    -- 2) –ï—Å–ª–∏ –Ω–µ—Ç, –∏—â–µ–º –º—è—á –≤–Ω—É—Ç—Ä–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π: HumanoidRootPart -> Ball -> ball
    for _, player in pairs(game.Players:GetPlayers()) do
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local hrp = char.HumanoidRootPart
            local ballFolder = hrp:FindFirstChild("Ball")
            if ballFolder then
                local b = ballFolder:FindFirstChild("ball") or ballFolder:FindFirstChildWhichIsA("BasePart")
                if b and b:IsA("BasePart") then
                    return b
                end
            end
        end
    end

    -- 3) –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫: –ª—é–±–æ–π –¥–≤–∏–∂—É—â–∏–π—Å—è –æ–±—ä–µ–∫—Ç —Å –∏–º–µ–Ω–µ–º "ball" –∏–ª–∏ –ø–æ—Ö–æ–∂–∏–º
    for _, v in pairs(workspace:GetDescendants()) do
        if (v.Name:lower():find("ball") or v.Name:lower():find("soccer")) and v:IsA("BasePart") then
            if v.AssemblyLinearVelocity.Magnitude > 0.1 then
                return v
            end
        end
    end

    return nil
end

-- –ü–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–µ–≥–æ GoalieCenter (—Ç–≤–æ–∏ –≤–æ—Ä–æ—Ç–∞)
local function getMyGoal()
    local player = game.Players.LocalPlayer
    local char = player and player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return nil end
    local hrp = char.HumanoidRootPart

    local candidates = {}
    local away = workspace:FindFirstChild("AwayPosition")
    local home = workspace:FindFirstChild("HomePosition")
    if away and away:FindFirstChild("GoalieCenter") then table.insert(candidates, away.GoalieCenter) end
    if home and home:FindFirstChild("GoalieCenter") then table.insert(candidates, home.GoalieCenter) end

    -- fallback: –Ω–∞–π—Ç–∏ –ª—é–±–æ–π GoalieCenter –≤ workspace
    if #candidates == 0 then
        for _, v in pairs(workspace:GetDescendants()) do
            if v.Name == "GoalieCenter" and v:IsA("BasePart") then
                table.insert(candidates, v)
            end
        end
    end

    local closest, dist = nil, math.huge
    for _, g in pairs(candidates) do
        local d = (hrp.Position - g.Position).Magnitude
        if d < dist then
            dist = d
            closest = g
        end
    end

    return closest
end

-- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª: –º–∞–≥–Ω–∏—Ç + –∞–≤—Ç–æ-—Å–µ–π–≤
local RunService = game:GetService("RunService")
local connection

local function startMagnet()
    if connection then connection:Disconnect() end

    connection = RunService.Heartbeat:Connect(function()
        local pl = game.Players.LocalPlayer
        local char = pl and pl.Character
        if not char then return end
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        -- –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—ã
        if Settings.ShowRadius then updateRadiusVisual() end
        if Settings.ShowGoalkeeperZone and goalkeeperZone then
            local myGoal = getMyGoal()
            if myGoal then
                goalkeeperZone.Position = myGoal.Position
                goalkeeperZone.Size = Vector3.new(Settings.SaveDistance * 2, Settings.SaveDistance * 2, Settings.SaveDistance * 2)
            end
        end

        local ball = getBall()
        if not ball then return end

        -- –ê–≤—Ç–æ-—Å–µ–π–≤ (–≤—Ä–∞—Ç–∞—Ä—å)
        if Settings.AutoSave then
            local myGoal = getMyGoal()
            if myGoal then
                local distBallToGoal = (myGoal.Position - ball.Position).Magnitude
                local distPlayerToGoal = (myGoal.Position - hrp.Position).Magnitude
                local ballVelocity = ball.AssemblyLinearVelocity or Vector3.new(0,0,0)
                if ballVelocity.Magnitude > 0.01 then
                    local directionToGoal = (myGoal.Position - ball.Position).Unit
                    local ballDirection = ballVelocity.Unit
                    local dotProduct = directionToGoal:Dot(ballDirection)
                    local now = tick()
                    local cooldown = 0.5 -- —Å–µ–∫ –º–µ–∂–¥—É —Å–µ–π–≤–∞–º–∏

                    if distBallToGoal <= Settings.SaveDistance and ballVelocity.Magnitude > 5 and dotProduct > 0.25 and now - lastSaveTime > cooldown then
                        lastSaveTime = now

                        -- –û—Ç–±–∏–≤–∞–µ–º –º—è—á: –Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç –≤–æ—Ä–æ—Ç —Å –Ω–µ–±–æ–ª—å—à–∏–º –ø–æ–¥—ä—ë–º–æ–º
                        local saveDirection = (ball.Position - myGoal.Position).Unit
                        saveDirection = Vector3.new(saveDirection.X, 0.35, saveDirection.Z).Unit
                        pcall(function()
                            ball.AssemblyLinearVelocity = saveDirection * Settings.SaveSpeed
                        end)

                        -- –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ –∫ –º—è—á—É (—á—Ç–æ–±—ã –Ω–µ –¥–µ—Ä–≥–∞—Ç—å—Å—è)
                        if Settings.AutoMove and distPlayerToGoal < Settings.SaveDistance then
                            local moveTo = ball.Position
                            local newPos = hrp.Position:Lerp(moveTo, 0.12)
                            hrp.CFrame = CFrame.new(newPos, moveTo)
                        end

                        Rayfield:Notify({
                            Title = "ü•Ö –°–ï–ô–í!",
                            Content = "–ú—è—á –æ—Ç–±—Ä–æ—à–µ–Ω",
                            Duration = 1
                        })
                    end
                end
            end
        end

        -- –ú–∞–≥–Ω–∏—Ç –º—è—á–∞
        if Settings.MagnetEnabled then
            local distance = (hrp.Position - ball.Position).Magnitude
            if distance <= Settings.Range then
                pcall(function()
                    if Settings.Method == "–§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞" then
                        local direction = (hrp.Position - ball.Position).Unit
                        local speed = math.clamp(distance * 2, 20, Settings.Strength)
                        ball.AssemblyLinearVelocity = direction * speed

                    elseif Settings.Method == "–ñ–µ—Å—Ç–∫–æ–µ –ø—Ä–∏–ª–∏–ø–∞–Ω–∏–µ" then
                        ball.CFrame = hrp.CFrame * CFrame.new(0, -2.5, -3)
                        ball.AssemblyLinearVelocity = hrp.AssemblyLinearVelocity
                        ball.AssemblyAngularVelocity = Vector3.new(0,0,0)

                    elseif Settings.Method == "–í–µ–∫—Ç–æ—Ä–Ω—ã–π –∑–∞—Ö–≤–∞—Ç" then
                        if not ball:FindFirstChild("BV_Magnet") then
                            local bv = Instance.new("BodyVelocity")
                            bv.Name = "BV_Magnet"
                            bv.MaxForce = Vector3.new(5e4,5e4,5e4)
                            bv.Parent = ball
                        end
                        local bv = ball:FindFirstChild("BV_Magnet")
                        if bv then
                            bv.Velocity = (hrp.Position - ball.Position).Unit * 70
                        end

                    elseif Settings.Method == "–ü–ª–∞–≤–Ω–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ" then
                        local direction = (hrp.Position - ball.Position).Unit
                        local currentVel = ball.AssemblyLinearVelocity or Vector3.new(0,0,0)
                        local targetVel = direction * Settings.Strength
                        ball.AssemblyLinearVelocity = currentVel:Lerp(targetVel, 0.28)
                    end
                end)
            else
                if ball:FindFirstChild("BV_Magnet") then
                    ball.BV_Magnet:Destroy()
                end
            end
        end
    end)
end

startMagnet()

-- === UI: –≤–∫–ª–∞–¥–∫–∞ –ú—è—á ===
Tab:CreateToggle({
    Name = "üß≤ –í–∫–ª—é—á–∏—Ç—å –ú–∞–≥–Ω–∏—Ç",
    CurrentValue = Settings.MagnetEnabled,
    Callback = function(Value)
        Settings.MagnetEnabled = Value
        if not Value then
            -- —É–¥–∞–ª–∏—Ç—å BodyVelocity —É —Ç–µ–∫—É—â–µ–≥–æ –º—è—á–∞
            local b = getBall()
            if b and b:FindFirstChild("BV_Magnet") then
                b.BV_Magnet:Destroy()
            end
        end
        Rayfield:Notify({Title = "–ú–∞–≥–Ω–∏—Ç", Content = Value and "–í–∫–ª—é—á–µ–Ω" or "–í—ã–∫–ª—é—á–µ–Ω", Duration = 2})
    end,
})

Tab:CreateToggle({
    Name = "üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞–¥–∏—É—Å –¥–µ–π—Å—Ç–≤–∏—è",
    CurrentValue = Settings.ShowRadius,
    Callback = function(Value)
        Settings.ShowRadius = Value
        if Value then createRadiusVisual() else destroyRadiusVisual() end
    end,
})

Tab:CreateDropdown({
    Name = "‚öôÔ∏è –ú–µ—Ç–æ–¥ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è",
    Options = {"–§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞", "–ñ–µ—Å—Ç–∫–æ–µ –ø—Ä–∏–ª–∏–ø–∞–Ω–∏–µ", "–í–µ–∫—Ç–æ—Ä–Ω—ã–π –∑–∞—Ö–≤–∞—Ç", "–ü–ª–∞–≤–Ω–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ"},
    CurrentValue = Settings.Method,
    Callback = function(Option)
        Settings.Method = Option
        -- —É–¥–∞–ª–∏—Ç—å BV —É –º—è—á–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –º–µ—Ç–æ–¥–∞
        local b = getBall()
        if b and b:FindFirstChild("BV_Magnet") then
            b.BV_Magnet:Destroy()
        end
    end,
})

Tab:CreateSlider({
    Name = "üìè –î–∏—Å—Ç–∞–Ω—Ü–∏—è –∑–∞—Ö–≤–∞—Ç–∞",
    Range = {10, 100},
    Increment = 5,
    CurrentValue = Settings.Range,
    Callback = function(Value)
        Settings.Range = Value
        if radiusPart then radiusPart.Size = Vector3.new(Value*2, Value*2, Value*2) end
    end,
})

Tab:CreateSlider({
    Name = "üí™ –°–∏–ª–∞ –º–∞–≥–Ω–∏—Ç–∞",
    Range = {10, 150},
    Increment = 5,
    CurrentValue = Settings.Strength,
    Callback = function(Value) Settings.Strength = Value end,
})

Tab:CreateButton({
    Name = "üîç –ù–∞–π—Ç–∏ –º—è—á (–¥–µ–±–∞–≥)",
    Callback = function()
        local b = getBall()
        if b then
            local pl = game.Players.LocalPlayer
            local hrp = pl.Character and pl.Character:FindFirstChild("HumanoidRootPart")
            local dist = hrp and math.floor((hrp.Position - b.Position).Magnitude) or "?"
            Rayfield:Notify({Title = "–ú—è—á –Ω–∞–π–¥–µ–Ω", Content = "–î–∏—Å—Ç–∞–Ω—Ü–∏—è: "..tostring(dist), Duration = 4})
        else
            Rayfield:Notify({Title = "–ú—è—á –Ω–µ –Ω–∞–π–¥–µ–Ω", Content = "–í –º–∞—Ç—á–µ –Ω–µ—Ç –º—è—á–∞ –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥—Ä—É–≥–∞—è", Duration = 4})
        end
    end,
})

Tab:CreateButton({
    Name = "üìç –¢–µ–ª–µ–ø–æ—Ä—Ç –∫ –º—è—á—É",
    Callback = function()
        local b = getBall()
        local pl = game.Players.LocalPlayer
        local hrp = pl.Character and pl.Character:FindFirstChild("HumanoidRootPart")
        if b and hrp then
            hrp.CFrame = b.CFrame * CFrame.new(0, 5, 0)
            Rayfield:Notify({Title = "–¢–µ–ª–µ–ø–æ—Ä—Ç", Content = "–í—ã —É –º—è—á–∞", Duration = 2})
        end
    end,
})

-- === UI: –≤–∫–ª–∞–¥–∫–∞ –í—Ä–∞—Ç–∞—Ä—å ===
TabGoalkeeper:CreateToggle({
    Name = "ü•Ö –ê–≤—Ç–æ-—Å–µ–π–≤ (–í—Ä–∞—Ç–∞—Ä—å)",
    CurrentValue = Settings.AutoSave,
    Callback = function(Value)
        Settings.AutoSave = Value
        Rayfield:Notify({Title = "–ê–≤—Ç–æ-—Å–µ–π–≤", Content = Value and "–í–∫–ª—é—á—ë–Ω" or "–í—ã–∫–ª—é—á–µ–Ω", Duration = 2})
    end,
})

TabGoalkeeper:CreateToggle({
    Name = "üèÉ –ê–≤—Ç–æ–¥–≤–∏–∂–µ–Ω–∏–µ –∫ –º—è—á—É",
    CurrentValue = Settings.AutoMove,
    Callback = function(Value) Settings.AutoMove = Value end,
})

TabGoalkeeper:CreateSlider({
    Name = "üìè –†–∞–¥–∏—É—Å –∑–∞—â–∏—Ç—ã –≤–æ—Ä–æ—Ç",
    Range = {10, 40},
    Increment = 1,
    CurrentValue = Settings.SaveDistance,
    Callback = function(Value)
        Settings.SaveDistance = Value
        if goalkeeperZone then goalkeeperZone.Size = Vector3.new(Value*2, Value*2, Value*2) end
    end,
})

TabGoalkeeper:CreateSlider({
    Name = "‚ö° –°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–±–∏–≤–∞–Ω–∏—è",
    Range = {60, 300},
    Increment = 5,
    CurrentValue = Settings.SaveSpeed,
    Callback = function(Value) Settings.SaveSpeed = Value end,
})

TabGoalkeeper:CreateToggle({
    Name = "üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å –∑–æ–Ω—É –∑–∞—â–∏—Ç—ã",
    CurrentValue = Settings.ShowGoalkeeperZone,
    Callback = function(Value)
        Settings.ShowGoalkeeperZone = Value
        if Value then createGoalkeeperZone() else destroyGoalkeeperZone() end
    end,
})

TabGoalkeeper:CreateButton({
    Name = "üéØ –ù–∞–π—Ç–∏ –≤–æ—Ä–æ—Ç–∞ (–¥–µ–±–∞–≥)",
    Callback = function()
        local g = getMyGoal()
        if g then
            local pl = game.Players.LocalPlayer
            local hrp = pl.Character and pl.Character:FindFirstChild("HumanoidRootPart")
            local dist = hrp and math.floor((hrp.Position - g.Position).Magnitude) or "?"
            Rayfield:Notify({Title = "–í–æ—Ä–æ—Ç–∞ –Ω–∞–π–¥–µ–Ω—ã", Content = "–î–∏—Å—Ç–∞–Ω—Ü–∏—è: "..tostring(dist), Duration = 4})
        else
            Rayfield:Notify({Title = "–í–æ—Ä–æ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã", Content = "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ä—Ç—ã –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞", Duration = 4})
        end
    end,
})

TabGoalkeeper:CreateButton({
    Name = "üìç –¢–µ–ª–µ–ø–æ—Ä—Ç –≤ –≤–æ—Ä–æ—Ç–∞",
    Callback = function()
        local g = getMyGoal()
        local pl = game.Players.LocalPlayer
        local hrp = pl.Character and pl.Character:FindFirstChild("HumanoidRootPart")
        if g and hrp then
            hrp.CFrame = g.CFrame * CFrame.new(0, 3, 5)
            Rayfield:Notify({Title = "–¢–µ–ª–µ–ø–æ—Ä—Ç", Content = "–í—ã –≤ –≤–æ—Ä–æ—Ç–∞—Ö", Duration = 2})
        end
    end,
})

-- –§–∏–Ω–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
Rayfield:Notify({
    Title = "üöÄ RSS God Mode –∑–∞–≥—Ä—É–∂–µ–Ω",
    Content = "–ò—Å–ø–æ–ª—å–∑—É–π –≤–∫–ª–∞–¥–∫–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –†–∞–±–æ—Ç–∞–µ—Ç –≤ –º–∞—Ç—á–µ, –Ω–µ –≤ –ª–æ–±–±–∏.",
    Duration = 5
})
